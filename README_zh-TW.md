# Sanity-Gravity: The Antigravity Sandbox

<p align="center">
  <img src="assets/logo.jpg" alt="Sanity-Gravity Logo" width="300">
</p>

[English](README.md) | [ç¹é«”ä¸­æ–‡](README_zh-TW.md) | [æ—¥æœ¬èª](README_ja.md)

**Sanity-Gravity** æ˜¯ä¸€å€‹å°ˆç‚º **Agentic AI IDEs** (å¦‚ Google Antigravity) è¨­è¨ˆçš„å®‰å…¨ã€å®¹å™¨åŒ–æ²™ç®±ç’°å¢ƒ (Sandbox)ã€‚å®ƒçš„ç›®çš„æ˜¯å°‡ AI ä»£ç†çš„æ´»å‹•é™åˆ¶åœ¨ä¸€å€‹å¯æ‹‹æ£„çš„ Docker å®¹å™¨å…§ï¼Œå°‡åŸ·è¡Œé¢¨éšªé™è‡³æœ€ä½ï¼ŒåŒæ™‚æä¾›å®Œæ•´çš„åœ–å½¢æ¡Œé¢é«”é©—ã€‚

## æ¼”ç¤º (Demo)

ğŸ“º **è§€çœ‹æ¼”ç¤ºå½±ç‰‡**: [YouTube Link](https://youtu.be/x0DGKuHyx2A)

## ç‚ºä»€éº¼é¸æ“‡ Sanity-Gravity?

*   **ğŸ›¡ï¸ å®‰å…¨è‡³ä¸Š (Safety First)**: éš”é›¢ã€ŒAI è‡ªä¸»åŸ·è¡Œã€å¸¶ä¾†çš„é¢¨éšªã€‚å¦‚æœ AI ä»£ç†åŸ·è¡Œäº† `rm -rf /` æˆ–æƒ¡æ„ä»£ç¢¼ï¼Œåªæœ‰å®¹å™¨æœƒå—å½±éŸ¿ï¼Œæ‚¨çš„æœ¬æ©Ÿä¸»æ©Ÿæ¯«é«®ç„¡å‚·ã€‚
*   **ğŸ–¥ï¸ å®Œæ•´åœ–å½¢æ¡Œé¢ (Full Desktop GUI)**: å…§å»º **Ubuntu 22.04 + XFCE4** èˆ‡ **KasmVNC**ï¼Œè®“ AI ä»£ç†èƒ½åƒçœŸäººä¸€æ¨£è‡ªç„¶åœ°æ“ä½œç€è¦½å™¨ (Chrome) å’Œ GUI æ‡‰ç”¨ç¨‹å¼ã€‚
*   **ğŸš€ é›¶é…ç½® (Zero Config)**: é å…ˆå®‰è£äº† **Antigravity IDE**ã€Google Chromeã€Git å’Œå¿…è¦çš„é–‹ç™¼å·¥å…·ã€‚
*   **ğŸ”Œ ç„¡ç¸« IO (Seamless IO)**: è‡ªå‹•æ˜ å°„æ‚¨çš„ä¸»æ©Ÿä½¿ç”¨è€… UID/GIDï¼Œé˜²æ­¢åœ¨æ›è¼‰å·¥ä½œå€æ™‚å¸¸è¦‹çš„ã€Œroot æ¬Šé™åœ°ç„ã€å•é¡Œã€‚

## å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚
*   Docker & Docker Compose (v2.0+)
*   Python 3.7+ (ç”¨æ–¼ `sanity-cli`)
*   *(é¸ç”¨)* **NVIDIA Container Toolkit** (ç”¨æ–¼ GPU åŠ é€Ÿ)

### å®‰è£

1.  è¤‡è£½å°ˆæ¡ˆåº« (Repository):
    ```bash
    git clone https://github.com/shiritai/sanity-gravity.git
    cd sanity-gravity
    ```

2.  å»ºç½®æ²™ç®±ç’°å¢ƒ:
    ```bash
    ./sanity-cli build
    ```

3.  åŸ·è¡Œ KasmVNC ç‰ˆæœ¬ (æ¨è–¦):
    ```bash
    ./sanity-cli run -v kasm --password mysecret
    ```

4.  **å­˜å–æ¡Œé¢**:
    æ‰“é–‹ç€è¦½å™¨ä¸¦å‰å¾€: **[https://localhost:8444](https://localhost:8444)**
    *   **ä½¿ç”¨è€…**: `(æ‚¨çš„ä¸»æ©Ÿä½¿ç”¨è€…åç¨±)`
    *   **å¯†ç¢¼**: `mysecret` (è‹¥æœªæŒ‡å®šï¼Œé è¨­ç‚º `antigravity`)

> **æ³¨æ„**: æ‚¨å¯èƒ½æœƒçœ‹åˆ°ã€Œè‡ªç°½ç½²æ†‘è­‰ã€çš„è­¦å‘Šã€‚é€™åœ¨æœ¬åœ°æ²™ç®±ç’°å¢ƒä¸­æ˜¯æ­£å¸¸çš„ï¼Œè«‹é»æ“Š "é€²éš" -> "ç¹¼çºŒ"ã€‚

## CLI ä½¿ç”¨ (`sanity-cli`)

æœ¬å°ˆæ¡ˆåŒ…å«ä¸€å€‹è¼”åŠ©è…³æœ¬ `sanity-cli` ä¾†ç®¡ç†ç”Ÿå‘½é€±æœŸ:

```bash
./sanity-cli list           # åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬
./sanity-cli build [name]   # å»ºç½®ç‰¹å®šç‰ˆæœ¬ (é è¨­: all)
./sanity-cli run -v [name] [options] # åŸ·è¡Œç‰¹å®šç‰ˆæœ¬
  # é¸é …:
  #   --password [pwd]    (è¨­å®š SSH/VNC å¯†ç¢¼, é è¨­: antigravity)
  #   --ssh-port [port]   (é è¨­: 2222)
  #   --kasm-port [port]  (é è¨­: 8444)
  #   --vnc-port [port]   (é è¨­: 5901)
  #   --novnc-port [port] (é è¨­: 6901)
  #   --gpu               (å•Ÿç”¨ NVIDIA GPU æ”¯æ´)
  #   --skip-check        (è·³éå‰ç½®æª¢æŸ¥)
  #   --workspace [path]  (è¨­å®šè‡ªè¨‚å·¥ä½œå€è·¯å¾‘, é è¨­: ./workspace)

./sanity-cli stop           # åœæ­¢æ‰€æœ‰å®¹å™¨
./sanity-cli status         # æª¢æŸ¥å®¹å™¨ç‹€æ…‹
```

## ç‰ˆæœ¬é¸æ“‡ (Variants)

| ç‰ˆæœ¬ (Variant) | æŠ€è¡“å †ç–Š         | æœ€ä½³ç”¨é€”            | å­˜å–æ–¹å¼                                   |
| :------------- | :--------------- | :------------------ | :----------------------------------------- |
| **`kasm`**     | KasmVNC          | **Web æ¡Œé¢ (æ¨è–¦)** | `https://localhost:8444`                   |
| **`vnc`**      | TigerVNC + noVNC | å‚³çµ± VNC å®¢æˆ¶ç«¯     | `localhost:5901` / `http://localhost:6901` |
| **`core`**     | SSH Only         | ç„¡å‘¨é‚Š / çµ‚ç«¯æ©Ÿä»£ç† | `ssh -p <port> developer@localhost`        |

## SSH å­˜å–

æ‰€æœ‰ç‰ˆæœ¬ï¼Œ**åŒ…å« GUI ç‰ˆæœ¬** (Kasm/VNC)ï¼Œé è¨­éƒ½å•Ÿç”¨äº† SSHã€‚é€™èƒ½å¯¦ç¾å¼·å¤§çš„æ··åˆå·¥ä½œæµï¼š

*   **Headless æ§åˆ¶**: ç„¡éœ€æ‰“é–‹æ¡Œé¢å³å¯é€é CLI è‡ªå‹•åŒ– GUI å·¥å…·ã€‚
*   **é€šè¨ŠåŸ è½‰ç™¼ (Port Forwarding)**: å°‡å®¹å™¨å…§çš„ Web æ‡‰ç”¨æˆ–é™¤éŒ¯å™¨è½‰ç™¼åˆ°ä¸»æ©Ÿ (ä¾‹å¦‚ `ssh -L 3000:localhost:3000 ...`)ã€‚
*   **æª”æ¡ˆå‚³è¼¸**: ä½¿ç”¨ `scp` æˆ– `sftp` è¼•é¬†ç§»å‹•å»ºç½®ç”¢ç‰©ã€‚
*   **é ç«¯é–‹ç™¼**: ç•¶ Agent åœ¨æ²™ç®±ä¸­åŸ·è¡Œæ™‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ¬æ©Ÿçš„ VS Code / JetBrains IDE é€é SSH é€£ç·šé€²è¡Œèˆ’é©çš„ Codingã€‚

**é è¨­é€šè¨ŠåŸ **: `2222` (å¯é€é `--ssh-port` è¨­å®š)
**æ†‘è­‰**: ä½¿ç”¨è€… `(æ‚¨çš„ä¸»æ©Ÿä½¿ç”¨è€…åç¨±)` / å¯†ç¢¼ `antigravity` (æˆ–è‡ªè¨‚)

```bash
# ç¯„ä¾‹: é€£ç·šåˆ° Kasm ç‰ˆæœ¬
ssh -p 2222 developer@localhost
```

## å°ˆæ¡ˆçµæ§‹

å°ˆæ¡ˆä½ˆå±€çš„å¿«é€Ÿç¸½è¦½ï¼š

```text
sanity-gravity/
â”œâ”€â”€ sanity-cli          # ğŸ› ï¸ ä¸»è¦ CLI å…¥å£ (Python è…³æœ¬)
â”œâ”€â”€ sandbox/            # ğŸ“¦ Docker å»ºç½®ç’°å¢ƒèˆ‡è¨­å®š
â”‚   â”œâ”€â”€ variants/       #    - å„ç‰ˆæœ¬çš„ Dockerfile (core, kasm, vnc)
â”‚   â””â”€â”€ rootfs/         #    - å…±ç”¨çš„ overlay (è…³æœ¬, è¨­å®šæª”)
â”œâ”€â”€ tests/              # ğŸ§ª Pytest æ•´åˆæ¸¬è©¦å¥—ä»¶
â”œâ”€â”€ workspace/          # ğŸ“‚ æ›è¼‰çš„ä½¿ç”¨è€…ç›®éŒ„ (æŒä¹…åŒ–è³‡æ–™)
â””â”€â”€ .github/            # ğŸ™ CI/CD å·¥ä½œæµèˆ‡ Issue æ¨¡æ¿
```

## å‘½åç”±ä¾† (What's in a Name?)

> **"Sanity-Gravity"** çš„å¯“æ„ï¼šç‚ºç‹‚é‡çš„ **Antigravity** (åé‡åŠ›/AI ä»£ç†) ä¸–ç•Œæä¾›ä¸€è‚¡å¼·å¤§çš„ **Gravity** (é‡åŠ›/ç´„æŸ)ï¼Œä»¥ç¶­è­·é–‹ç™¼è€…çš„ **Sanity** (ç†æ™º)ã€‚

*   **Sanity (ç†æ™º)**: è®“æ‚¨çš„ä¸»æ©Ÿç’°å¢ƒä¿æŒã€Œæ­£å¸¸ã€ã€‚é€éå°‡ä¸å¯é æ¸¬çš„ Agentic AI åŸ·è¡Œé™åˆ¶åœ¨å¯æ‹‹æ£„çš„å®¹å™¨ä¸­ï¼Œæˆ‘å€‘é˜²æ­¢äº†æ„å¤–ç ´å£ (ä¾‹å¦‚ `rm -rf /`) å’Œè¨­å®šæ±¡æŸ“ã€‚
*   **Gravity (é‡åŠ›)**: ç‚º **Antigravity** ç³»çµ±æä¾›ä¸€å€‹ã€Œæ¥åœ°ã€çš„åŸ·è¡Œç’°å¢ƒã€‚å®ƒçµ¦äº†é£„æµ®çš„ AI ä»£ç†ä¸€å€‹å…·é«”çš„è‘—é™¸é»ï¼Œè®“å®ƒå€‘èƒ½åœ¨ç‰©ç†æ³•å‰‡ï¼ˆéš”é›¢ï¼‰çš„ç´„æŸä¸‹èˆ‡å·¥å…·äº’å‹•ä¸¦å½±éŸ¿ä¸–ç•Œã€‚

## æˆæ¬Š (License)

æœ¬å°ˆæ¡ˆæ¡ç”¨ **Apache License 2.0** æˆæ¬Šã€‚è©³æƒ…è«‹è¦‹ [LICENSE](LICENSE)ã€‚
